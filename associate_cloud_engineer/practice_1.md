# 問題

## 1

Compute Engine の VM インスタンスにおいてアプリケーションを実行していて、
来月にトラフィックが増加することが予測されている

1. ブートディスクのスナップショットを作成する。
2. スナップショットからカスタムイメージを作成し、カスタムイメージを用いて新しいインスタンスを複数作成する。

## 2

バケットの新しいリージョンに移動させる場合に、
新しいリージョンと古いリージョンでのバケット名と同じである必要があります

他のバケットにデータを一時的に移動し、古いリージョンのバケットを削除する。その後、新しいリージョンで同じ名前のバケットを作成し、データを移動させる。

バケット名はグローバルに一意である必要がある

## 3

Deployment Manager を使用してリソースをデプロイする際は、
gcloud コマンドラインツールを--preview フラグを使用して実行して、変更をコミットする前に定義されている全てのリソースの依存関係が適切に満たされているか確認できる

## 4

古いプロジェクトの削除方法は、
Cloud Shell を使用して、gcloud projects delete コマンドにプロジェクト ID を指定して実行する。

## 5

Compute Engine のディスク読み取りスロットリングによるパフォーマンスを向上させる場合、
ゾーン永続ディスクの代わりにローカル SSD を使用する

## 6

TestLink を利用したい場合、Google Cloud Marketplace に存在する

## 7

ファイアウォールは優先度の数字が低い方が高くなるため、優先度 65534 で全ての出力トラフィックをブロックさせ、それより高い優先度で必要なポートのトラフィックを許可する

## 8

Deployment Manager を使用してインフラストラクチャに変更を加える必要があります。変更箇所を展開する前にチーム内で変更内容を共有するには、どうすれば良いでしょうか？

変更箇所を定義した Deployment Manager テンプレートを Cloud Source Repositories に保存する。

## 9

Google クラウド上の Windows VM インスタンスで実行されるアプリケーションを管理しています。リモートデスクトッププロトコル（RDP）を使用してインスタンスにログインする必要があります。認証情報を生成するには、どうすれば良いでしょうか？

gcloud compute reset-windows-password コマンドを使用し、インスタンスの認証情報を取得する。

## 10

ProjectA、ProjectB で VM インスタンスグループのグループ間トラフィックの相互通信を実現させる場合、

1. ProjectA をホストプロジェクトとして共有 VPC を設定する。
2. ProjectB を共有 VPC のサービスプロジェクトとして接続する。

## 11

全てのチーム内ユーザを含むグループを作成し、roles/accessapproval.approver ロールをグループに付与する

## 12

新しいチームメンバーに Cloud Storage のバケット内のオブジェクトを一覧表示できる権限を付与する必要があり、最小権限の原則に従う場合、どの IAM ロールを付与すれば良い？

Storage オブジェクト閲覧者

## 13

```
gcloud app services set-traffic --split=v2=.5,v1=.5
```

## 14

Windows ベースのレガシーアプリケーションは Compute Engine に移行する

## 15

Web サイトでバケット内にある PDF ファイルへのリンクを表示していますが、 リンクをクリックするとブラウザが常にローカルマシンにファイルを保存するようにしたい
PDF ファイルの Content-Type メタデータを application/pdf に設定する。

## 16

あなたは new-config.yaml というファイルを使用し、Deployment Manager の以前のデプロイメントを更新する必要がある

```
gcloud deployment-manager deployments update --config new-config.yaml
```

## 17

Compute Engine で
管理者ユーザーとして VM インスタンスにログインできる権限を付与する

誰がどのインスタンスにアクセスしたかを特定できる必要がある

チームの各メンバーに、新しい SSH キーペアを生成し、それぞれの Google アカウントに公開鍵を追加するように依頼する。 チームに対応する Google グループに compute.osAdminLogin ロールを付与する。

## 18

監査人用に新しい Google グループを作成して以下の事前定義ロールを割り当てる

```
logging.viewer
logging.dataViewer
```

サービスに必要な事前定義ロールが割り当てられていない場合にカスタムロールを作成する

## 19

使用可能なインスタンス数を減少させないように MIG を利用してローリングアップデートでデプロイするときの設定は、
一時点な追加のインスタンス数を 1、オフライン上限インスタンス数を 0 にする

## 20

VM インスタンスのマシンタイプをカスタムに設定してメモリを増やしてインスタンスを再起動する

## 21

`gcloud compute networks subnets expand-ip-range`コマンドを実行し、プレフィックスの長さをより小さな数に設定する。

## 22

署名付き URL を生成し、有効期限を 2 時間に指定する。生成した署名付き URL をパートナー組織と共有する。

## 23

あなたは Cloud Spanner をデータベースとして使用するアプリケーションを管理しています。アプリケーションのトラフィックに基づいて Spanner ノードをスケーリングする必要があります。迅速かつ自動的にスケーリングを実行するのに適切な手順を下記から選択して下さい。

Cloud Spanner インスタンスの CPU 使用率がしきい値の範囲外となった時にトリガーされる Cloud Monitoring アラートポリシーを作成し、通知チャネルを Cloud Pub/Sub に設定する。Pub/Sub トピックをサブスクライブし、リソースをスケーリングする Cloud Functions を作成する。

## 24

GCP Pricing Calculator を利用することで毎月の見積もりコストが計算できる

## 25

```
gcloud iam roles copy --source=role-name --destination=role-name --source-project=project-id --dest-project=project-id
```

## 26

新しいチームメンバーに Cloud Spanner インスタンスのテーブル情報を表示および編集できるアクセスを提供する必要がある

新しく Google グループを作成する。チームメンバーの各ユーザーをグループに関連付け、グループに roles/spanner.databaseUser ロールを付与する。

## 27

Compute Engine でインスタンスが誤って削除されるのを防ぐ

GCP コンソールでインスタンスを編集し、「削除からの保護の有効化」をオンにする。

## 28

コードを Cloud Functions にデプロイし、バケット内のファイル削除をトリガーとして設定する。

## 29

```
kubectl scale --replicas=5 rs/my-replicase
```

## 30

Compute Engine では外部 IP アドレスなしでインスタンスを作成することでパブリックインターネットからアクセスできないようにする必要がある

## 31

BigQuery で実行前にクエリにかかる費用を確認したい場合

1. bq コマンドラインツールで--dry_run フラグを使用してクエリを実行し、読み取られるバイト数を取得する。
2. Pricing Calculator で取得したバイト数を使用し、クエリの見積もり費用を取得する。

## 32

App Engine を利用してアプリケーションの新しいバージョンをデプロイしました。数時間後、デプロイしたバージョンに重大なバグが発見されました。最小限の手順でアプリケーションを以前のバージョンに戻す

-> Google クラウドコンソールで App Engine のバージョンページを開き、トラフィックの 100％を以前のバージョンにルーティングする。

gcloud app restore コマンドは存在しない

## 33

App Engine アプリケーションの開発環境を利用して本番環境の新しいプロジェクトを用意したい

`gcloud projects create`

`gcloud app deploy`

## 34

App Engine でリクエスト負荷に応じてスケーリングする必要があります。また、アイドル状態で起動するインスタンスが少なくとも常に２つ存在していなければいけない

min_idle_instances を 2 に設定して、自動スケーリング設定を設定します。

## 35

外部 API にアクセスする Cloud Function をデプロイする場合、ベストプラクティスによると
Secret Manager を使用して API キーを管理するのが良い

## 36

CloudStorage バケットのデータを読み取る必要がある場合、インスタンスで使用するサービスアカウントを作成し、storage.objectViewer ロールを付与し、アクセスを許可するバケット名を条件に指定する。

## 37

Cloud Monitroing を使用しているアプリケーションを実行している VM インスタンスのモニタリングで、
サポートチームはモニタリングデータに対する読み取り権限を必要としている

サポートチームを含むグループを作成し、モニタリング閲覧者（roles/monitoring.viewer）ロールを付与する

## 38

非構造データを Dataflow SQL ジョブによってデータを処理できるのは Cloud Storage

## 39

オンプレミスのアプリケーションを GCP 上にデプロイする計画似といて、
ライセンスサーバーは Compute Engine で実行され、アプリケーションは 10.128.3.14 の IP アドレスを使用して、ライセンスサーバーへ接続する様にする場合、
10.128.3.14 を静的内部 IP アドレスとして予約し、ライセンスサーバーインスタンスのプライマリ内部 IP として設定する。

## 40

CloudStorage において「新しいバージョンの数」を 0 に設定すると、ライブバージョンにもアクションが適用される

## 41

現在アクティブなアカウントと、認証済みのアカウントの一覧を表示する

```
gcloud auth list
```

## 42

```
gcloud compute instances stop web-app-1
```

## 43

開発用と本番用の VM インスタンスが VPC の内部 IP を介して相互に通信できるようにするには
サブネット作成モードがカスタムの VPC を一つ作成し、異なる CIDR ブロックを持つ二つのサブネットを作成する。

## 44

Container Registry は廃止され Artifact Registry へ

## 45

ログは指定した単一のリージョンに保存する必要があります。データは保存されてから 30 日後にアーカイブされ、四半期に一回アクセスされます。

1. データの保存場所に Region を選択してバケットを作成する。
2. 30 日後にストレージクラスを Coldline に設定するオブジェクトライフサイクルルールを追加する。

## 46

第三者監査人に Google Cloud プロジェクトへのアクセスを提供する必要があります。監査人はプロジェクトの全てのリソースを表示できる必要がありますが、変更は許可されない

「閲覧者」ロールを監査人アカウントに付与する。

## 47

Active Directory を外部 ID プロバイダおよび信頼できるソースとして Google クラウドと連携させる場合は
Cloud Directory Sync を利用する

## 48

```
gcloud projects get-iam-policy project-id
```

## 49

作成日から 30 日が経過したログは Nearline ストレージクラスに移動し、90 日後に削除する必要があります。

1. 30 日後にオブジェクトのストレージクラスを Nearline に設定するライフサイクルルールを追加する。
2. 90 日後にオブジェクトを削除するライフサイクルルールを追加する。

## 50

外部 SSL プロキシロードバランサはインターネットから送信された SSL トラフィックを VPC ネットワークの仮想マシン（VM）インスタンスに分散するリバースプロキシロードバランサ
